{% macro menuLink (text, linkUrl, className) %}
  {% set classes = className %}
  {% if page.url == linkUrl %}
    {% set classes = classes + " " + className + "--active" %}
  {% endif %}
  <a class="{{ classes }}" href="{{ linkUrl | url }}">
    {{ text }}
  </a>
{% endmacro %}

<header class="l-header">
  <img class="l-header__logo" src="{{ '/assets/logo-redhat--reversed.png' | url }}" alt="Red Hat" />
  <nav class="l-header__site-navigation site-navigation">
    <ul class="site-navigation__wrapper">
      <li class="site-navigation__item">
        {{ menuLink('Home', '/', 'site-navigation__link') }}
      </li>
      <li class="site-navigation__item">
        {% set extraAttributes = "" %}
        {% if 'components/' in page.url %}
          {% set extraAttributes = " open" %}
        {% endif %}
        <details {{ extraAttributes }}>
          <summary class="site-navigation__heading">Components</summary>
          <ul class="site-navigation__sub-menu">
            {%- for component in collections.component -%}
              <li class="site-navigation__sub-menu__item">
                {{ menuLink(component.data.title, component.url, 'site-navigation__sub-menu__link') }}
              </li>
            {%- endfor -%}
          </ul>
        </details>
      </li>
      <li class="site-navigation__item">
        {{ menuLink('Example Nunjucks Page', '/example/', 'site-navigation__link') }}
      </li>
      <li class="site-navigation__item">
        {{ menuLink('Example Markdown Page', '/documentation/example/', 'site-navigation__link') }}
      </li>
    </ul>
  </nav>
</header>
