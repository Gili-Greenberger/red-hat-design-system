{% macro menuLink (text, linkUrl, className) %}
  {% set classes = className %}
  {% if page.url == linkUrl %}
    {% set classes = classes + " " + className + "--active" %}
  {% endif %}
  <a class="{{ classes }}" href="{{ linkUrl | url }}">
    {{ text }}
  </a>
{% endmacro %}

<div id="widgetContainer"></div>
<script>
  window.onUsersnapCXLoad = function(api) {
    // mountNode is an element in which the widget should be rendered
    api.init({ mountNode: document.getElementById('widgetContainer') });
  }
  var script = document.createElement('script');
  script.defer = 1;
  script.src = 'https://widget.usersnap.com/embed/load/07a733fc-1b2b-45ac-9acc-6df5d8227e88?onload=onUsersnapCXLoad';
  document.getElementsByTagName('head')[0].appendChild(script);
</script>

<header class="l-header">

  <div class="l-header__logo-bar">
    <a href="/"><img class="l-header__logo" src="{{ '/assets/red-hat-digital-design-system.svg' | url }}" alt="Red Hat digital design system" style="max-width:240px;min-width:240px;" /></a>
  </div>

  <input id="mobile-menu-toggle" class="menu-toggle element-invisible" type="checkbox" aria-controls="mobile-menu-menu-container">

  <label class="menu-toggle__button l-header__mobile-menu-toggle" for="mobile-menu-toggle" data-controls="mobile-menu-menu-container">
    <span class="l-header__burger-icon"></span>
    <span class="menu-toggle-assistive-text element-invisible">Toggle menu visibility</span>
  </label>

  <div class="menu-toggle__toggleable site-navigation__outer-wrapper">
    <nav class="l-header__site-navigation site-navigation menu-toggle__toggleable-content-wrapper">
      <ul class="site-navigation__wrapper">
        <li class="site-navigation__item">
          {{ menuLink('Home', '/', 'site-navigation__link') }}
        </li>
        <li class="site-navigation__item">
          {{ menuLink('About this website', '/about/', 'site-navigation__link') }}
        </li>

        <!-- Get started -->

        <li class="site-navigation__item">
          {% set extraAttributes = "" %}
          {% if 'get-started/' in page.url %}
            {% set extraAttributes = " open" %}
          {% endif %}
          <details {{ extraAttributes }}>
            <summary class="site-navigation__heading">Get started</summary>
            <ul class="site-navigation__sub-menu">
              <li class="site-navigation__sub-menu__item">
                {{ menuLink('Overview', '/get-started/', 'site-navigation__sub-menu__link') }}
              </li>
              {%- for getstarted in collections.getstarted -%}
                <li class="site-navigation__sub-menu__item">
                  {{ menuLink(getstarted.data.title, getstarted.url, 'site-navigation__sub-menu__link') }}
                </li>
              {%- endfor -%}
            </ul>
          </details>
        </li>

        <!-- Foundations -->

        <li class="site-navigation__item">
          {% set extraAttributes = "" %}
          {% if 'foundations/' in page.url %}
            {% set extraAttributes = " open" %}
          {% endif %}
          <details {{ extraAttributes }}>
            <summary class="site-navigation__heading">Foundations</summary>
            <ul class="site-navigation__sub-menu">
              <li class="site-navigation__sub-menu__item">
                {{ menuLink('Overview', '/foundations/', 'site-navigation__sub-menu__link') }}
                {{ menuLink('Color', '/foundations/color/', 'site-navigation__sub-menu__link') }}
                {{ menuLink('Grid', '/foundations/grid/', 'site-navigation__sub-menu__link') }}
                {{ menuLink('Personalization patterns', '/foundations/personalization/', 'site-navigation__sub-menu__link') }}
                {{ menuLink('Spacing', '/foundations/spacing/', 'site-navigation__sub-menu__link') }}
                {{ menuLink('Typography', '/foundations/typography/', 'site-navigation__sub-menu__link') }}
              </li>
              <!-- {%- for foundation in collections.foundations -%}
                <li class="site-navigation__sub-menu__item">
                  {{ menuLink(foundation.data.title, foundation.url, 'site-navigation__sub-menu__link') }}
                </li>
              {%- endfor -%} -->
            </ul>
          </details>
        </li>

        <!-- Components -->

        <li class="site-navigation__item">
          {% set extraAttributes = "" %}
          {% if 'components/' in page.url %}
            {% set extraAttributes = " open" %}
          {% endif %}
          <details {{ extraAttributes }}>
            <summary class="site-navigation__heading">Components</summary>
            <ul class="site-navigation__sub-menu">
              <li class="site-navigation__sub-menu__item">
                {{ menuLink('All components', '/components/', 'site-navigation__sub-menu__link') }}
              </li>
              {%- for component in collections.component -%}
                <li class="site-navigation__sub-menu__item">
                  {{ menuLink(component.data.title, component.url, 'site-navigation__sub-menu__link') }}
                </li>
              {%- endfor -%}
            </ul>
          </details>
        </li>

        <li class="site-navigation__item">
          {{ menuLink('Design/code status', '/design-code-status/', 'site-navigation__link') }}
        </li>

        <li class="site-navigation__item">
          {{ menuLink('Release notes', '/release-notes/', 'site-navigation__link') }}
        </li>

        <!--

        <li class="site-navigation__item">
          {{ menuLink('Get started', '/get-started/', 'site-navigation__link') }}
        </li>

        -->

      </ul>
    </nav>
  </div>
</header>
